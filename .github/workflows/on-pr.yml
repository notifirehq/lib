name: Check pull request
concurrency:
  group: '${{ github.workflow }}-${{ github.ref }}'
  cancel-in-progress: true

env:
  NX_CLOUD_ACCESS_TOKEN: ${{ secrets.NX_CLOUD_ACCESS_TOKEN }}

on:
  pull_request:
  workflow_dispatch:

jobs:
  test_e2e_api:
    name: E2E test API
    # needs: [get-affected]
    uses: ./.github/workflows/reusable-api-e2e.yml
    with:
      ee: true
      test-e2e-affected: true
      test-e2e-ee-affected: true
      job-name: 'novu/api-ee'
      test-unit: false
    secrets: inherit
